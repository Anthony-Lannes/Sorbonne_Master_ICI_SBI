Ce document présente quelques exercices sur les bases de python : 
        str, int, list, set, tuple, dict, boucles for et while, fonctions
Il a pour but de vous remémorer et vous faire découvrir les manipulations des objets de bases.
Parmi toutes les questions, certaines solutions ne sont disponibles dans aucun document de cours. C'est normal.

Les exercices portent sur des cas d'usages rencontrés par les professionnels de la data en entreprises.
Vous utiliserez les données infos.json dans le dossier rappels.
Le format json est un format largement rencontré en entreprise ou dans le back des sites webs,
car il permet d'avoir accès à toutes les infos selon un modèle hiérarchisé.

Vous répondrez ensuite aux questions présentées dans ce document.
Pour faciliter votre travail, créer un notebook et nommez-le "00_Bases_de_python.ipynb" (File -> New File -> 00_Bases_de_python.ipynb).
Puis créez une cellule de type "Markdown" et collez-y chaque question. 
Enfin répondez à la question avec autant de cellule de type "Code" que nécessaire.

Contexte : 
Vous êtes junior data analyst chez Shoply, un e-commerce B2C. 
On vous fournit des structures Python brutes en json : 
    des listes, dictionnaires et tuples représentant des clients, produits et commandes.


Voici le code pour récuperer les données et créer les variables de travail : 

import json

with open("data_shoply.json", "r", encoding="utf-8") as f:
    data = json.load(f)

# 1- On récupère les clients tels quels (list[dict])
clients = data["clients"]

# 2- On convertit produits en dict[id] -> (nom, prix) pour rester compatible
produits = {pid: (p["nom"], p["prix"]) for pid, p in data["produits"].items()}

# 3- On convertit les lignes en listes de tuples (product_id, quantite)
commandes = []
for cmd in data["commandes"]:
    lignes_tuples = [(l["product_id"], l["quantite"]) for l in cmd["lignes"]]
    commandes.append({
        "id": cmd["id"],
        "client_id": cmd["client_id"],
        "lignes": lignes_tuples,
        "statut": cmd["statut"]
    })


01- Affichez le nombre total de clients. 
        Réponse attendue : 5

02- Calculez le total de la ligne (P004, 2).
        Réponse attendue : 24
        
03- Donnez la longueur du nom complet du premier client.
        Réponse attendue : 12
        
04- Affichez le prénom de chaque client.
        Réponse attendue : ['Alice', 'Bob', 'Chloé', 'David', 'Éva']
        
05- Dans le 3ème nom, remplacer les accents par les mêmes lettres sans accents. 
    Utiliser une f-string pour donner le résultat.
        Réponse attendue : 'Chloe Lefevre'

06- Pour chaque email, vérifiez la présence de "@".
        Réponse attendue : [True, True, True, True, True]

07- Vérifier qu'il n'y a pas deux clients avec le même email.
        Réponse attendue : "Aucun doublon ? True"
        
08- Renvoyer les clients sans commandes sous forme de set.
        Réponse attendue : {'C004'}
        
09- Renvoyer les ID des produits jamais commandés.
        Réponse attendue : {'P005'}
        
00- Filtrer les commandes pour ne garder que les commandes actives (ie statut != "annulée").
        Réponse attendue : ['O001', 'O002', 'O003', 'O005']
        
11- Trouvez le numéro de commande de la première commande annulée.
        Réponse attendue : # O004
        
12- Renvoyer le nombre total de commande par client sous forme d'un dictionnaire.
        Réponse attendue : {'C001': 1, 'C002': 2, 'C003': 1, 'C005': 1}
        
13- Créer un nouveau dictionnaire, appelé new_products, contenant 6 produits (des casques de 6 couleurs différentes), 
    de références P006 à P011 (aidez-vous de la méthode .zfill()) et de prix identiques.
    Ajouter les au dictionnaire produit, de 3 manières différentes.
        Réponse attendue : {'P001': ('Clavier mécanique', 79),
                            'P002': ('Souris sans fil', 39),
                            'P003': ('Écran 24"', 149),
                            'P004': ('Câble HDMI', 12),
                            'P005': ('Webcam HD', 59),
                            'P006': ('Casque rouge', 99),
                            'P007': ('Casque bleu', 99),
                            'P008': ('Casque vert', 99),
                            'P009': ('Casque noir', 99),
                            'P010': ('Casque blanc', 99),
                            'P011': ('Casque violet', 99)}
        
14- Calculer le total de la commande O001.
        Réponse attendue : 90.50
        
15- Calculer le panier moyen des commandes non annulées. Trouver une façon de formatter le résultat avec deux décimales.
        Réponse attendue : 5
        
16- Créer une fonction qui prend en paramètre un numéro de commande et qui renvoie le total de la commande. 
    Donner le total de chaque commande.
        Réponse attendue : O001 103
                           O002 39
                           O003 161
                           O004 157
                           O005 59
        
17- Appliquer une remise de 10% aux commandes O002 et O003. Arrondir les résultats à 2 décimales.
        Réponse attendue : 5
        
18- Créer une fonction qui renvoie le chiffre d'affaires (CA) par ville, puis le donner pour chacune des villes.
        Réponse attendue : 5
        
19- Faire un classement par ordre décroissant des clients par CA sous forme de liste.
    Chaque client doit apparaitre sous forme d'un tuple (client_id, nom-prenom, CA).
        Réponse attendue : 5
        
20- Générez un rapport affichant les données suivantes. 
    nb clients, nb commandes (total/actives), CA total (hors annulées), top produit (volume), top ville (CA)
        Réponse attendue : 5
        